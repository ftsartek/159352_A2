{% extends "_base.jinja" %}

{% block main %}

<h1>Booking Page</h1>

{% if step == 1 %}
<form method=post class="form-group">
    {{ searchform.csrf_token }}
    <dl>
        {{ searchform.start_airport.label }}
        {{ searchform.start_airport(class_="form-control") }}
        {{ searchform.end_airport.label }}
        {{ searchform.end_airport(class_="form-control") }}
        {{ searchform.date_start_selector.label }}
        {{ searchform.date_start_selector(class_="form-control") }}
        {{ searchform.date_end_selector.label }}
        {{ searchform.date_end_selector(class_="form-control") }}
        {{ searchform.submit }}
    </dl>
</form>
{% endif %}

{% if step == 2 %}
<h3>Listing flights from:</h3><br>
<p>{{ airport_data[0].name }}</p><br>
<h3>To:</h3><br>
<p>{{ airport_data[1].name }}</p><br>
<h3>Between:</h3>
<p>{{ searchform.date_start_selector.data }} and {{ searchform.date_end_selector.data }}</p>
<img src="/static/img/{{ airport_data[0].icao.lower() }}-{{ airport_data[1].icao.lower() }}.gif" class="img-fluid rounded-end">
{% for flight in results %}
    <div class="row mb-3 rounded">
        <div class="col-2 m-0 p-2 border rounded-start">
            <h5 class="noto-bold"><strong>{{ flight.get("Flight Designation") }}</strong></h5>
            <h6 class="noto-bold">({{ flight.get("Departure Airport ICAO") }} <span class="bi bi-arrow-right"></span> {{ flight.get("Arrival Airport ICAO") }}) </h6>
            <h6 class="noto-bold">{{ flight.get("Schedule Date") }}</h6>
            <h6 class="noto-regular">{{ flight.get("Aircraft Model") }}</h6>
        </div>
        <div class="col-8 m-0 p-2 border border-start-0 noto-regular">
            <p>Departs {{ flight.get("Departure Airport Name") }} at {{ flight.get("Start Leg Departure") }}</p>
            <p>Arrives at {{ flight.get("Arrival Airport Name") }} at {{ flight.get("End Leg Arrival") }}</p>
            {% if flight.get("Stops") == 1 %}
            <p>{{ flight.get("Stops") }} intermediate stop</p>
            {% elif flight.get("Stops") > 1 %}
            <p>{{ flight.get("Stops") }} intermediate stops</p>
            {% else %}
            <p>Direct Flight</p>
            {% endif %}
            <p>Seats available: {{ flight.get("Aircraft Capacity") - flight.get("Schedule Bookings") }}</p>
        </div>
        <div class="col-2 m-0 p-2 border border-start-0 rounded-end bg-primary text-white schedule-selector">
            <h5>Book Flight</h5>
        </div>
    </div>
    {#  Modal (Bootstrap) for selection of a flight  #}
    <div>

    </div>
{% endfor %}

{% endif %}



{% endblock %}